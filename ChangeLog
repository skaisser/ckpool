# CKPool Changelog

## EloPool Fork - Production Features & Improvements

This fork transforms CKPool into a production-ready Bitcoin Cash solo mining pool with significant enhancements for modern ASIC mining operations.

## Production Achievements
- **66 mainnet blocks** successfully mined on Bitcoin Cash network
- Battle-tested with major mining services (NiceHash, MiningRigRentals)
- Production deployment handling industrial ASIC miners

## Major Features

### Bitcoin Cash Support
- âœ¨ Full CashAddr support for BCH addresses (mainnet/testnet/regtest)
- âœ¨ Multi-node ZMQ support for faster block detection
- ğŸ› Fixed BCH-specific getblocktemplate compatibility (removed segwit)
- ğŸ”§ Automatic network detection (mainnet/testnet/regtest)

### Mining Enhancements
- âœ¨ **Multi-difficulty support** with password and pattern matching
- âœ¨ **NiceHash compatibility** with automatic difficulty adjustment
- âœ¨ **User-agent based difficulty** detection for rental services
- âœ¨ **Pool operator fee** with dual-output coinbase splitting
- âœ¨ **Dynamic per-user coinbase messages** via btcsig
- âš¡ Optimized share validation logic

### Installation & Configuration
- âœ¨ Interactive installation script with mainnet/testnet configs
- âœ¨ Unified build system with cross-platform support
- ğŸ”§ Auto-detection of BCH nodes from config
- ğŸ“š Comprehensive API documentation for ckpmsg

### Bug Fixes & Improvements
- ğŸ› Fixed critical share validation logic
- ğŸ› Corrected CashAddr 5-bit to 8-bit conversion
- ğŸ› Fixed NiceHash difficulty application with pattern matching
- ğŸ› Resolved format specifier warnings
- ğŸ› Fixed ZMQ subscription string length issues
- âš¡ Performance optimizations for share acceptance

### Lean Blocks Feature (Experimental)
- âœ¨ Dual submit for maximum block discovery
- ğŸ“š Comprehensive documentation for lean blocks mode
- ğŸ”§ Test and production configs included

### Documentation
- ğŸ“š Complete rewrite of README with production features
- ğŸ“š Added CKPool API guide
- ğŸ“š Ubuntu deployment guides
- ğŸ“š Regtest testing documentation
- âš ï¸ Critical issue tracking and resolution

### Code Quality
- ğŸ§¹ Repository cleanup - removed unused files
- â™»ï¸ Modernized installer scripts
- ğŸ§¹ Removed deprecated donation addresses
- ğŸ”§ Updated .gitignore for build artifacts

## Recent Updates (Latest First)

### v1.1.0 (2025-10-08) - Production Deployment Suite
**Enterprise-Grade Multi-Node Failover**
- âš¡ **Instant failover** - Single failure triggers failover (~100ms vs 4+ seconds)
- âš¡ **Sync-aware failover** - Stays on backup while primary node is syncing
- âš¡ **Automatic recovery** - Intelligently fails back to primary when ready
- ğŸ› Fixed synchronous failover preventing retry of failed servers
- ğŸ› Added forward declaration for reconnect_generator to fix build errors
- ğŸ“š Comprehensive multi-node redundancy documentation with real production logs

**Production Deployment Tools**
- âœ¨ Added `post-install.sh` - Systemd service installer with firewall configuration
- âœ¨ Added `monitor.sh` - Matrix-style colorized log viewer with real-time monitoring
- âœ¨ Added `clean-old-blocks.sh` - Automatic cleanup of old block directories
- ğŸ”§ Auto-detection of stratum ports from config files
- ğŸ”§ UFW firewall integration with automatic port configuration
- ğŸ”§ Systemd service with production-grade resource limits
- ğŸ”§ Automatic cron job setup for maintenance tasks

**Systemd Service Enhancements**
- ğŸ”§ Updated to production-tested configuration
- ğŸ”§ Added network-online.target for better network reliability
- ğŸ”§ ExecReload with HUP signal for graceful reloads
- ğŸ”§ Higher resource limits (2.1M NOFILE, 32K NPROC, unlimited MEMLOCK)
- ğŸ”§ Proper timeout values (60s start, 30s stop)
- ğŸ”§ KillMode=mixed and KillSignal=SIGTERM for clean shutdown
- ğŸ“š Documentation field pointing to GitHub repository

**Installation & Dependencies**
- ğŸ› Added dependency checking to install-ckpool.sh
- ğŸ”§ Auto-detection of OS (Ubuntu/Debian)
- ğŸ”§ Automatic dependency installation prompts
- ğŸ“š Updated installation and service management documentation

### 2025 - Production Optimizations
- ğŸ“š Emphasized 66 mainnet blocks in production achievements
- ğŸ“š Moved comparison table to top of README
- ğŸ§¹ Removed unused cashaddr.cpp files
- âš¡ Only reject shares below pool mindiff
- ğŸ› Removed false CashAddr warnings

### 2024 - Core Development
- Complete Bitcoin Cash compatibility implementation
- Multi-difficulty system for rental services
- Interactive installation system
- Pool fee implementation
- CashAddr address format support

## Legacy CKPool Base

Built upon the solid foundation of CKPool by Con Kolivas, maintaining core stability while adding modern features required for production Bitcoin Cash mining operations.

For detailed commit history, see: https://github.com/skaisser/ckpool

---
*Note: This changelog represents significant changes since forking from the original CKPool project. For the complete commit history, use `git log`.*